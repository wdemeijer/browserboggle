{"ts":1346235096646,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function BStone(sides) {\r\n\tthis.sides = sides;\r\n\tthis.location;\r\n\tthis.init();\r\n}\r\n\r\nBStone.prototype = {\r\n\tinit: function() {\r\n\t\tconsole.log(\"New stone!\");\r\n\t\t$.each(this.sides, function(id, side) { console.log(\"Stone has: \"+side)});\r\n\t},\r\n\tset_location: function(x,y) {\r\n\t\tconsole.log(\"Stone location: x: \"+x+\" y: \"+y+\"\");\r\n\t\tthis.location = {x: x, y: y};\r\n\t},\r\n\tshow: function(element)  {\r\n\t\tcontainer_height = 500;\r\n\t\tstone_size = container_height/4;\r\n\t\tx_position = stone_size * this.location.x;\r\n\t\ty_position = stone_size * this.location.y;\r\n\t\t\r\n\t\tvar letter = this.sides[Math.floor(Math.random()*6)];\r\n\t\t\r\n\t\thtml = \"<div class='boggle_stone' id='\"+this.location.x+\"-\"+this.location.y+\"' style='top:\"+y_position+\"px;left:\"+x_position+\"px; width: \"+stone_size+\"px; height:\"+stone_size+\"px;display:block;'>\"+letter+\"</div>\";\r\n\t\tconsole.log(\"drawing:\"+html+\" on element:\"+element);\r\n\t\t$(element).append(html);\r\n\t}\r\n\r\n}\r\nBStone.prototype.constructor = BStone;\r\n\r\nfunction BStoneManager(stones) {\r\n\tthis.stones = stones;\r\n}\r\nBStoneManager.prototype = {\r\n\tshow_stones: function(element) {\r\n\t\tthis.stones.sort(function() { return 0.5 - Math.random() });\r\n\t\tconsole.log(\"Showing stones!\");\r\n\t\t\r\n\t\t$(element).html(\"\");\r\n\t\tvar grid_width = 4;\r\n\t\tvar grid_height = 4;\r\n\t\tvar stone_number = 0 ;\r\n\t\tfor(x = 0; x<grid_width; x++) {\r\n\t\t\tfor(y = 0; y<grid_height; y++) {\r\n\t\t\t\tthis.stones[stone_number].set_location(x, y);\r\n\t\t\t\tstone_number++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t$.each(this.stones, function(id, stone) { \r\n\t\t\tstone.show(element);\r\n\t\t});\r\n\t}\r\n}\r\nBStoneManager.prototype.constructor = BStoneManager;\r\n\r\nfunction BBoard(stonemanager, timer) {\r\n\tthis.timer = timer;\r\n\tthis.stone_manager = stonemanager;\r\n\tthis.init();\r\n}\r\nBBoard.prototype = {\r\n\tinit: function() {\r\n\t\tconsole.log(\"Board initialized.\");\r\n\t\tjQuery('#start_boggle_button').bind('click',{context: this} , this.start);\r\n\t},\r\n\tstart: function(event) {\r\n\t\tvar self = event.data.context;\r\n\t\tself.stone_manager.show_stones(\"#stone_container\");\r\n\t\tself.timer.start(\"#stone_container\");\r\n\t\t\r\n\t\tconsole.log(\"Start boggle!\");\r\n\t\t\r\n\t}\r\n}\r\nBBoard.prototype.constructor = BBoard;\r\n\r\nBTimer = function(container, countdown_container, start_time, countdown_time) {\r\n\tthis.container  = container;\r\n\tthis.countdown_container  = countdown_container;\r\n\tthis.start_time = start_time;\r\n\tthis.countdown_time = countdown_time;\r\n\tthis.time;\r\n\tthis.timeout;\r\n}\r\nBTimer.prototype = {\r\n\tstart: function() {\r\n\t\tconsole.log(\"Timer started at \"+this.start_time+\".\");\r\n\t\t$(this.container).html(\"Get ready!\");\r\n\t\tthis.time = this.countdown_time;\r\n\t\tvar self = this;\r\n\t\tclearTimeout(this.timeout);\r\n\t\tthis.count_countdown();\r\n\t\t$(this.countdown_container).css(\"background\", \"#FFFFFF\");\r\n\t\t$(this.countdown_container).css(\"opacity\", \"1\");\r\n\t\t$(this.countdown_container).css(\"display\", \"block\");\r\n\t\t$(this.countdown_container).mouseover(function() {});\r\n\t\t$(this.countdown_container).mouseout(function() {});\r\n\t\tthis.initialized = 1;\r\n\t},\r\n\t\r\n\tmake_minutes: function(total_seconds) {\r\n\t\tvar minutes = Math.floor(total_seconds/60);\r\n\t\tvar seconds = total_seconds - (minutes*60);\r\n\t\tif(seconds <10) {\r\n\t\t\tseconds = \"0\"+seconds;\r\n\t\t}\r\n\t\treturn {minutes: minutes, seconds: seconds};\r\n\t},\r\n\t\r\n\tcount_main: function() {\r\n\t\tthis.show_time();\r\n\t\tif(this.time > 0) {\r\n\t\t\tthis.time--;\r\n\t\t\tvar self = this;\r\n\t\t\tthis.timeout = setTimeout(function() { self.count_main(); }, 1000);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.log(\"animate\");\r\n\t\t\t$(this.countdown_container).css(\"display\", \"block\");\r\n\t\t\t$(this.countdown_container).animate({\r\n\t\t\t\topacity: 1,\r\n\t\t\t  }, 250, function() {\r\n\t\t\t\t// Animation complete.\r\n\t\t\t  });\r\n\t\t\t  self = this;\r\n\t\t\t$(this.countdown_container).mouseover(function() { \r\n\t\t\t\t$(self.countdown_container).css(\"opacity\", \"0\");\r\n\t\t\t});\r\n\t\t\t$(this.countdown_container).mouseout(function() { \r\n\t\t\t\t$(self.countdown_container).css(\"opacity\", \"1\");\r\n\t\t\t});\r\n\t\t\t$(self.countdown_container).html(\"Stop writing!\");\r\n\t\t\t$(self.container).html(\"\");\r\n\t\t\t\r\n\t\t}\r\n\t},\r\n\tcount_countdown: function () {\r\n\t\tthis.show_countdown_time();\r\n\t\tconsole.log(\"show time:\"+this.time);\r\n\t\tif(this.time > 0) {\r\n\t\t\tthis.time--;\r\n\t\t\tvar self = this;\r\n\t\t\tthis.timeout = setTimeout(function() { self.count_countdown(); }, 1000);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar self = this;\r\n\t\t\t $(this.countdown_container).animate({\r\n\t\t\t\topacity: 0,\r\n\t\t\t  }, 1000, function() {\r\n\t\t\t\t$(self.countdown_container).css(\"display\", \"none\");\r\n\t\t\t\t// Animation complete.\r\n\t\t\t  });\r\n\t\t\tthis.time = this.start_time;\r\n\t\t\tthis.count_main();\r\n\t\t}\r\n\t},\r\n\t\r\n\tshow_countdown_time: function() {\r\n\t\tif(this.time <1) {\r\n\t\t\tshow_time = \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tshow_time = this.time;\r\n\t\t}\r\n\t\t$(this.countdown_container).html(show_time);\r\n\t},\r\n\t\r\n\tshow_time: function() {\r\n\t\tcurrent_time = this.make_minutes(this.time);\r\n\t\t$(this.container).html(current_time.minutes+\":\"+current_time.seconds);\r\n\t}\r\n}\r\nBTimer.prototype.constructor = BTimer;\r\n\r\n$(document).ready(function() {\r\n  console.log(\"Document ready.\");\r\n  var stones = new Array(\r\n\t\t\t\t  new BStone(new Array(\"N\",\"S\",\"T\",\"E\",\"D\",\"O\")),\r\n\t\t\t\t  new BStone(new Array(\"P\",\"M\",\"E\",\"A\",\"D\",\"C\")),\r\n\t\t\t\t  new BStone(new Array(\"O\",\"B\",\"Q\",\"J\",\"M\",\"D\")),\r\n\t\t\t\t  new BStone(new Array(\"A\",\"R\",\"M\",\"S\",\"I\",\"I\")),\r\n\t\t\t\t  new BStone(new Array(\"R\",\"G\",\"L\",\"U\",\"W\",\"E\")),\r\n\t\t\t\t  new BStone(new Array(\"G\",\"U\",\"Y\",\"E\",\"J\",\"N\")),\r\n\t\t\t\t  new BStone(new Array(\"N\",\"T\",\"U\",\"E\",\"P\",\"L\")),\r\n\t\t\t\t  new BStone(new Array(\"N\",\"L\",\"I\",\"B\",\"T\",\"A\")),\r\n\t\t\t\t  new BStone(new Array(\"E\",\"F\",\"H\",\"S\",\"E\",\"I\")),\r\n\t\t\t\t  new BStone(new Array(\"H\",\"S\",\"R\",\"N\",\"E\",\"I\")),\r\n\t\t\t\t  new BStone(new Array(\"K\",\"X\",\"I\",\"R\",\"F\",\"A\")),\r\n\t\t\t\t  new BStone(new Array(\"A\",\"D\",\"V\",\"N\",\"Z\",\"E\")),\r\n\t\t\t\t  new BStone(new Array(\"V\",\"N\",\"T\",\"I\",\"E\",\"G\")),\r\n\t\t\t\t  new BStone(new Array(\"R\",\"A\",\"E\",\"S\",\"H\",\"C\")),\r\n\t\t\t\t  new BStone(new Array(\"A\",\"O\",\"W\",\"I\",\"A\",\"E\")),\r\n\t\t\t\t  new BStone(new Array(\"N\",\"E\",\"T\",\"Z\",\"K\",\"O\"))\r\n\t\t\t\t);\r\n  var stone_manager = new BStoneManager(stones);\r\n  var timer = new BTimer(\"#timer_container\",\"#countdown_container\", 180, 3);\r\n  var board = new BBoard(stone_manager, timer);\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":6031}]],"length":6031}
{"contributors":[],"silentsave":false,"ts":1355693596515,"patch":[[{"diffs":[[0,"height/4"],[1," - 5"],[0,";\r\n\t\tx_p"]],"start1":445,"start2":445,"length1":16,"length2":20},{"diffs":[[0,"\n\t\tx_position = "],[1,"("],[0,"stone_size * thi"]],"start1":459,"start2":459,"length1":32,"length2":33},{"diffs":[[0,"on = (stone_size"],[1," + 5)"],[0," * this.location"]],"start1":470,"start2":470,"length1":32,"length2":37},{"diffs":[[0,"ition = "],[1,"("],[0,"stone_si"]],"start1":519,"start2":519,"length1":16,"length2":17},{"diffs":[[0,"one_size"],[1," + 5)"],[0," * this."]],"start1":530,"start2":530,"length1":16,"length2":21},{"diffs":[[0,"ion.y;\r\n"],[1,"        \r\n        \r\n"],[0,"\t\t\r\n\t\tva"]],"start1":556,"start2":556,"length1":16,"length2":36},{"diffs":[[0,")*6)];\r\n"],[1,"        \r\n        var rotation = Math.floor((Math.random()*3)+0) * 90 + Math.floor((Math.random()*5)+0);\r\n"],[0,"\t\t\r\n\t\tht"]],"start1":637,"start2":637,"length1":16,"length2":122},{"diffs":[[0,"y:block;"],[1,"-webkit-transform:rotate(\"+rotation+\"deg)"],[0,"'>\"+lett"]],"start1":942,"start2":942,"length1":16,"length2":57},{"diffs":[[0,"init();\r\n}\r\n"],[1,"\r\n"],[0,"BBoard.proto"]],"start1":1878,"start2":1878,"length1":24,"length2":26}]],"length":6216,"saved":false}
{"ts":1355693647228,"patch":[[{"diffs":[[0,"andom()*"],[-1,"5"],[1,"3"],[0,")+0);\r\n\t"]],"start1":735,"start2":735,"length1":17,"length2":17}]],"length":6216,"saved":false}
{"ts":1355693768645,"patch":[[{"diffs":[[0,"th.random()*"],[-1,"3"],[1,"45"],[0,")+0);\r\n\t\t\r\n\t"]],"start1":731,"start2":731,"length1":25,"length2":26}]],"length":6217,"saved":false}
{"ts":1355693925970,"patch":[[{"diffs":[[0,"m()*"],[-1,"45"],[1,"3"],[0,")+0)"]],"start1":739,"start2":739,"length1":10,"length2":9}]],"length":6216,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358196142188,"patch":[[{"diffs":[[0,"\r\n\t\t\r\n\t\t"],[1,"var "],[0,"html = \""]],"start1":749,"start2":749,"length1":16,"length2":20},{"diffs":[[0,"\r\n\t\tfor("],[1,"var "],[0,"x = 0; x"]],"start1":1475,"start2":1475,"length1":16,"length2":20},{"diffs":[[0,"\n\t\t\tfor("],[1,"var "],[0,"y = 0; y"]],"start1":1515,"start2":1515,"length1":16,"length2":20}]],"length":6228,"saved":false}
{"ts":1358196156116,"patch":[[{"diffs":[[0,")  {\r\n\t\t"],[1,"var "],[0,"containe"]],"start1":387,"start2":387,"length1":16,"length2":20},{"diffs":[[0," 500;\r\n\t"],[1,"    var"],[0,"\tstone_s"]],"start1":417,"start2":417,"length1":16,"length2":23},{"diffs":[[0,"- 5;\r\n\t\t"],[1,"var "],[0,"x_positi"]],"start1":465,"start2":465,"length1":16,"length2":20},{"diffs":[[0,"n.x;\r\n\t\t"],[1,"var "],[0,"y_positi"]],"start1":521,"start2":521,"length1":16,"length2":20}]],"length":6247,"saved":false}
{"ts":1358196232223,"patch":[[{"diffs":[[0,"y;\r\n"],[-1,"        \r\n        \r\n"],[0,"\t\t\r\n"]],"start1":579,"start2":579,"length1":28,"length2":8}]],"length":6227,"saved":false}
{"ts":1358196268221,"patch":[[{"diffs":[[0,");\r\n"],[-1,"\t\t$(this.countdown_container).css(\"background\", \"#FFFFFF\");\r\n\t\t$(this.countdown_container).css(\"opacity\", \"1\");\r\n"],[0,"\t\t$("]],"start1":2833,"start2":2833,"length1":121,"length2":8}]],"length":6114,"saved":false}
{"ts":1358196316764,"patch":[[{"diffs":[[0,"untdown();\r\n"],[1,"        $(this.stone_container).css(\"display\",\"none\");\r\n"],[0,"\t\t$(this.cou"]],"start1":2825,"start2":2825,"length1":24,"length2":80}]],"length":6170,"saved":false}
{"ts":1358196345046,"patch":[[{"diffs":[[0,"      $("],[-1,"this."],[1,"\"#"],[0,"stone_co"]],"start1":2839,"start2":2839,"length1":21,"length2":18},{"diffs":[[0,"#stone_container"],[1,"\""],[0,").css(\"display\","]],"start1":2848,"start2":2848,"length1":32,"length2":33}]],"length":6168,"saved":false}
{"ts":1358196434165,"patch":[[{"diffs":[[0,", \"none\");\r\n"],[1,"                $(\"#stone_container\").css(\"display\", \"none\");\r\n"],[0,"\t\t\t\t// Anima"]],"start1":4510,"start2":4510,"length1":24,"length2":87}]],"length":6231,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358198993431,"patch":[[{"diffs":[[0," * 90 + "],[1,"("],[0,"Math.flo"]],"start1":708,"start2":708,"length1":16,"length2":17},{"diffs":[[0,"()*3)+0)"],[1," - 1.5)"],[0,";\r\n\t\t\r\n\t"]],"start1":740,"start2":740,"length1":16,"length2":23},{"diffs":[[0,"ss(\""],[-1,"display\",\"none"],[1,"opacity\", \"0"],[0,"\");\r"]],"start1":2876,"start2":2876,"length1":22,"length2":20},{"diffs":[[0," \"block\");\r\n"],[-1,"\t\t\t"],[1,"            $(\"#stone_container\").css(\"opacity\", \"0\");\r\n            "],[0,"$(this.count"]],"start1":3613,"start2":3613,"length1":27,"length2":92},{"diffs":[[0,"ty\", \"0\");\r\n"],[1,"                $(\"#stone_container\").css(\"opacity\", \"1\");\r\n"],[0,"\t\t\t});\r\n\t\t\t$"]],"start1":3931,"start2":3931,"length1":24,"length2":84},{"diffs":[[0,"ty\", \"1\");\r\n"],[-1,"\t\t\t});"],[1,"                $(\"#stone_container\").css(\"opacity\", \"0\");\r\n\t\t\t});\r\n            \r\n            "],[0,"\r\n\t\t\t$(self."]],"start1":4108,"start2":4108,"length1":30,"length2":118},{"diffs":[[0,"    "],[-1,"$(\"#stone_container\").css(\"display\", \"none\");"],[1,"\r\n                \r\n\t\t\t\t// Animation complete.\r\n\t\t\t  });\r\n              $(\"#stone_container\").animate({\r\n    \t\t\topacity: 1,\r\n\t\t\t  }, 1000, function() {\r\n                \r\n                "],[0,"\r\n\t\t"]],"start1":4753,"start2":4753,"length1":53,"length2":195}]],"length":6592,"saved":false}
